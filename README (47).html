<hr>


<center>


<img src="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/23b9b236-746e-409c-8e86-30b4385e3b72/hr1-raypham.gif" alt="hr-line" width="781" height="22">


<p>NEXT</p>


</center>


<hr>


<h1 id="python-indent">Python Indent</h1>
<p>Correct python indentation in Visual Studio Code. See the extension on the <a href="https://marketplace.visualstudio.com/items?itemName=KevinRose.vsc-python-indent&amp;ssr=true">VSCode Marketplace</a> and its source code on <a href="https://github.com/kbrose/vsc-python-indent">GitHub</a>.</p>
<p><img src="https://github.com/kbrose/vsc-python-indent/raw/master/static/demo.gif" /></p>
<p><a href="https://dev.azure.com/kevinbrose/vsc-python-indent/_build/latest?definitionId=1&amp;branchName=master"><img src="https://dev.azure.com/kevinbrose/vsc-python-indent/_apis/build/status/vsc-python-indent-CI?branchName=master" alt="Build Status" /></a> <a href="https://marketplace.visualstudio.com/items?itemName=KevinRose.vsc-python-indent"><img src="https://vsmarketplacebadge.apphb.com/installs-short/KevinRose.vsc-python-indent.svg" alt="Installs" /></a> <a href="https://marketplace.visualstudio.com/items?itemName=KevinRose.vsc-python-indent"><img src="https://vsmarketplacebadge.apphb.com/rating-star/KevinRose.vsc-python-indent.svg" alt="Stars" /></a></p>
<h2 id="how-it-works">How it works</h2>
<p>Every time you press the <code>Enter</code> key in a python context, this extension will parse your python file up to the location of your cursor, and determine exactly how much the next line (or two in the case of hanging indents) should be indented and how much nearby lines should be un-indented.</p>
<p>There are three main cases when determining the correct indentation, described below.</p>
<h3 id="between-bracket-pairs">Between bracket pairs</h3>
<p>In cases when you have your cursor between an open bracket (one of <code>[({</code>) and its closing bracket pair (the corresponding one of <code>})]</code>), this extension will keep subsequent lines indented just to the right of where it was opened:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb1-1" title="1">data <span class="op">=</span> {<span class="st">&#39;a&#39;</span>: <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb1-2" title="2">        <span class="op">|</span> <span class="co"># &lt;- pressing enter should put your cursor at the &quot;|&quot;</span></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="op">|</span> <span class="co"># &lt;- This is where default VS Code puts your cursor.</span></a></code></pre></div>
<p>Even heavily nested brackets are handled:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb2-1" title="1">data <span class="op">=</span> {<span class="st">&#39;a&#39;</span>: <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb2-2" title="2">        <span class="st">&#39;b&#39;</span>: [[<span class="dv">1</span>, <span class="dv">2</span>],</a>
<a class="sourceLine" id="cb2-3" title="3">              <span class="op">|</span> <span class="co"># &lt;- match the more recently opened [ instead of the {</span></a>
<a class="sourceLine" id="cb2-4" title="4">        <span class="op">|</span> <span class="co"># &lt;- default behavior of VS Code.</span></a></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb3-1" title="1">data <span class="op">=</span> {<span class="st">&#39;a&#39;</span>: <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb3-2" title="2">        <span class="st">&#39;b&#39;</span>: [[<span class="dv">1</span>, <span class="dv">2</span>],</a>
<a class="sourceLine" id="cb3-3" title="3">              [<span class="dv">3</span>, <span class="dv">4</span>]],</a>
<a class="sourceLine" id="cb3-4" title="4">        <span class="op">|</span> <span class="co"># &lt;- since the lists are all closed, go back to the { position</span></a>
<a class="sourceLine" id="cb3-5" title="5">              <span class="op">|</span> <span class="co"># &lt;- default behavior of VS Code.</span></a></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb4-1" title="1">data <span class="op">=</span> {<span class="st">&#39;a&#39;</span>: <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb4-2" title="2">        <span class="st">&#39;b&#39;</span>: [[<span class="dv">1</span>, <span class="dv">2</span>],</a>
<a class="sourceLine" id="cb4-3" title="3">              [<span class="dv">3</span>, <span class="dv">4</span>]],</a>
<a class="sourceLine" id="cb4-4" title="4">        <span class="st">&#39;c&#39;</span>: <span class="dv">5</span>}</a>
<a class="sourceLine" id="cb4-5" title="5"><span class="op">|</span> <span class="co"># &lt;- go back to indentation level before any brackets were opened</span></a>
<a class="sourceLine" id="cb4-6" title="6">        <span class="op">|</span> <span class="co"># &lt;- default behavior of VS Code.</span></a></code></pre></div>
<p>In the full example below, default VS Code required nine extra key presses (three <code>tab</code>'s, two <code>space</code>'s, and four <code>backspace</code>'s) to match the <em>automatic</em> indentation of this extension.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb5-1" title="1">data <span class="op">=</span> {<span class="st">&#39;a&#39;</span>: <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb5-2" title="2">        <span class="st">&#39;b&#39;</span>: [[<span class="dv">1</span>, <span class="dv">2</span>],</a>
<a class="sourceLine" id="cb5-3" title="3">              [<span class="dv">3</span>, <span class="dv">4</span>]],</a>
<a class="sourceLine" id="cb5-4" title="4">        <span class="st">&#39;c&#39;</span>: <span class="dv">5</span>}</a>
<a class="sourceLine" id="cb5-5" title="5">done(data)</a></code></pre></div>
<h3 id="hanging-indents">Hanging indents</h3>
<p>When you have opened a bracket, but not yet inserted any content, pressing <code>Enter</code> will create a hanging indent, matching the base behavior of VS Code.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb6-1" title="1">result <span class="op">=</span> my_func(</a>
<a class="sourceLine" id="cb6-2" title="2">    <span class="op">|</span> <span class="co"># &lt;- your cursor should end up here</span></a>
<a class="sourceLine" id="cb6-3" title="3">) <span class="co"># &lt;- the closing bracket should end up here</span></a></code></pre></div>
<p>You can use the setting <code>useTabOnHangingIndent</code> to make it so that when you are done typing you can simply press <code>Tab</code> to be taken to the closing bracket.</p>
<p>If there is content to the right of your cursor when you press <code>Enter</code>, then this extension falls back on just indenting by your set tab size.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb7-1" title="1"><span class="co"># The &quot;|&quot; is your cursor&#39;s location.</span></a>
<a class="sourceLine" id="cb7-2" title="2">result <span class="op">=</span> my_func(<span class="op">|</span>x, y, z)</a>
<a class="sourceLine" id="cb7-3" title="3"><span class="co"># and when you press enter...</span></a>
<a class="sourceLine" id="cb7-4" title="4">result <span class="op">=</span> my_func(</a>
<a class="sourceLine" id="cb7-5" title="5">    <span class="op">|</span>x, y, z)</a></code></pre></div>
<p>If you never want to have the closing bracket end up on its own line (i.e. you always want to just indent by the set tab size), use the <code>keepHangingBracketOnLine</code> configuration setting. <em>Warning:</em> This may cause confusing indentation with function definitions as the argument list and the function code may end up at the same indentation level.</p>
<p>It's not often used, but a backslash to continue a line will also result in the next line being indented.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb8-1" title="1">my_long_calculation <span class="op">=</span> <span class="dv">1234</span> <span class="op">+</span> <span class="op">\</span></a>
<a class="sourceLine" id="cb8-2" title="2">    <span class="dv">5678</span></a></code></pre></div>
<h3 id="keywords">Keywords</h3>
<p>Some keywords in python imply certain indentation behaviors. For example, if there is a <code>return</code> statement, then we know the next line can be un-indented (or <em>de</em>dented) since no statements can follow a <code>return</code> in the same code block. Other keywords that follow the same pattern are <code>pass</code>, <code>break</code>, <code>continue</code>, and <code>raise</code></p>
<p>Similarly, if there is an <code>else:</code> on the current line, that the current line needs to be dedented, and the next line needs to be indented <em>relative to</em> the new position of the <code>else:</code>. Other keywords that follow the same pattern are <code>elif &lt;stuff&gt;:</code>, <code>except &lt;stuff&gt;:</code>, and <code>finally:</code>. Some examples are shown below.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb9-1" title="1"><span class="cf">if</span> <span class="va">True</span>:</a>
<a class="sourceLine" id="cb9-2" title="2">    <span class="cf">pass</span></a>
<a class="sourceLine" id="cb9-3" title="3">    <span class="cf">else</span>:<span class="op">|</span></a>
<a class="sourceLine" id="cb9-4" title="4"><span class="co"># and when you press enter...</span></a>
<a class="sourceLine" id="cb9-5" title="5"><span class="cf">if</span> <span class="va">True</span>:</a>
<a class="sourceLine" id="cb9-6" title="6">    <span class="cf">pass</span></a>
<a class="sourceLine" id="cb9-7" title="7"><span class="cf">else</span>:</a>
<a class="sourceLine" id="cb9-8" title="8">    <span class="op">|</span></a></code></pre></div>
<p>But if you have manually changed the indentation, then the extension should not change it for you:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb10-1" title="1"><span class="cf">if</span> <span class="va">True</span>:</a>
<a class="sourceLine" id="cb10-2" title="2">    <span class="cf">if</span> <span class="va">True</span>:</a>
<a class="sourceLine" id="cb10-3" title="3">        <span class="cf">pass</span></a>
<a class="sourceLine" id="cb10-4" title="4">    <span class="cf">else</span>:<span class="op">|</span></a>
<a class="sourceLine" id="cb10-5" title="5"><span class="co"># and when you press enter, do NOT dedent!</span></a>
<a class="sourceLine" id="cb10-6" title="6"><span class="cf">if</span> <span class="va">True</span>:</a>
<a class="sourceLine" id="cb10-7" title="7">    <span class="cf">if</span> <span class="va">True</span>:</a>
<a class="sourceLine" id="cb10-8" title="8">        <span class="cf">pass</span></a>
<a class="sourceLine" id="cb10-9" title="9">    <span class="cf">else</span>:</a>
<a class="sourceLine" id="cb10-10" title="10">        <span class="op">|</span></a>
<a class="sourceLine" id="cb10-11" title="11"></a>
<a class="sourceLine" id="cb10-12" title="12"><span class="co"># Or even more nested</span></a>
<a class="sourceLine" id="cb10-13" title="13"></a>
<a class="sourceLine" id="cb10-14" title="14"><span class="cf">if</span> <span class="va">True</span>:</a>
<a class="sourceLine" id="cb10-15" title="15">    <span class="cf">if</span> <span class="va">True</span>:</a>
<a class="sourceLine" id="cb10-16" title="16">        <span class="cf">if</span> <span class="va">True</span>:</a>
<a class="sourceLine" id="cb10-17" title="17">            <span class="cf">pass</span></a>
<a class="sourceLine" id="cb10-18" title="18">    <span class="cf">else</span>:<span class="op">|</span></a>
<a class="sourceLine" id="cb10-19" title="19"><span class="co"># and when you press enter, still do NOT dedent</span></a>
<a class="sourceLine" id="cb10-20" title="20"><span class="cf">if</span> <span class="va">True</span>:</a>
<a class="sourceLine" id="cb10-21" title="21">    <span class="cf">if</span> <span class="va">True</span>:</a>
<a class="sourceLine" id="cb10-22" title="22">        <span class="cf">if</span> <span class="va">True</span>:</a>
<a class="sourceLine" id="cb10-23" title="23">            <span class="cf">pass</span></a>
<a class="sourceLine" id="cb10-24" title="24">    <span class="cf">else</span>:</a>
<a class="sourceLine" id="cb10-25" title="25">        <span class="op">|</span></a></code></pre></div>
<h2 id="extending-comments">Extending comments</h2>
<p>If (and only if) you press <code>Enter</code> while your cursor is in the middle of a comment, then the next line will automatically be made into a comment.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb11-1" title="1"><span class="co"># As always, the &quot;|&quot; indicates your cursor</span></a>
<a class="sourceLine" id="cb11-2" title="2"><span class="kw">def</span> f():</a>
<a class="sourceLine" id="cb11-3" title="3">    <span class="co"># This function is |gonna be REAL good!</span></a>
<a class="sourceLine" id="cb11-4" title="4"></a>
<a class="sourceLine" id="cb11-5" title="5"><span class="kw">def</span> f():</a>
<a class="sourceLine" id="cb11-6" title="6">    <span class="co"># This function is</span></a>
<a class="sourceLine" id="cb11-7" title="7">    <span class="co"># |gonna be REAL good</span></a></code></pre></div>
<p>The next line will always have a hash and a space prepended, regardless of whether your cursor has a space to the right of it. This matches the behavior of VSCode without this extension installed.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb12-1" title="1"><span class="kw">def</span> f():</a>
<a class="sourceLine" id="cb12-2" title="2">    <span class="co"># This function is| gonna be REAL good!</span></a>
<a class="sourceLine" id="cb12-3" title="3"></a>
<a class="sourceLine" id="cb12-4" title="4"><span class="kw">def</span> f():</a>
<a class="sourceLine" id="cb12-5" title="5">    <span class="co"># This function is</span></a>
<a class="sourceLine" id="cb12-6" title="6">    <span class="co"># | gonna be REAL good</span></a></code></pre></div>
<h2 id="trimming-whitespace-lines">Trimming whitespace lines</h2>
<p>You can trim whitespace from lines that contain <em>only</em> whitespace by using the <code>trimLinesWithOnlyWhitespace</code> configuration setting (the default is to not trim whitespace in this way). This setting brings the behavior closer to native VSCode behavior.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb13-1" title="1"><span class="co"># In the below code, the character &quot;·&quot; represents a space.</span></a>
<a class="sourceLine" id="cb13-2" title="2"><span class="kw">def</span> f():</a>
<a class="sourceLine" id="cb13-3" title="3">····<span class="op">|</span></a>
<a class="sourceLine" id="cb13-4" title="4"></a>
<a class="sourceLine" id="cb13-5" title="5"><span class="co"># The default of false preserves whitespace</span></a>
<a class="sourceLine" id="cb13-6" title="6"><span class="kw">def</span> f():</a>
<a class="sourceLine" id="cb13-7" title="7">····</a>
<a class="sourceLine" id="cb13-8" title="8">····<span class="op">|</span></a>
<a class="sourceLine" id="cb13-9" title="9"></a>
<a class="sourceLine" id="cb13-10" title="10"><span class="co"># Setting trimLinesWithOnlyWhitespace = true will trim the whitespace.</span></a>
<a class="sourceLine" id="cb13-11" title="11"><span class="kw">def</span> f():</a>
<a class="sourceLine" id="cb13-12" title="12"></a>
<a class="sourceLine" id="cb13-13" title="13">····<span class="op">|</span></a></code></pre></div>
<h2 id="why-is-it-needed">Why is it needed?</h2>
<p>There are many related issues on GitHub (<a href="https://github.com/Microsoft/vscode-python/issues/481">[1]</a>, <a href="https://github.com/Microsoft/python-language-server/issues/671">[2]</a>, <a href="https://github.com/Microsoft/vscode/issues/66235">[3]</a>, <a href="https://github.com/Microsoft/vscode-python/issues/684">[4]</a>, <a href="https://github.com/Microsoft/vscode-python/issues/539">[5]</a>) asking for improved python indentation in VS Code. It seems like the maintainers of the python extension at microsoft are not prioritizing indentation, since there has been no progress in the years since it was first asked for.</p>
<h2 id="caveats">Caveats</h2>
<p>Known caveats are listed below.</p>
<ul>
<li>Using tabs (<code>\t</code>) for your indentation will not work.</li>
<li>If your python code is not correctly formatted, you may not get correct indentation.</li>
<li>The extension works by registering the <code>Enter</code> key as a keyboard shortcut. The conditions when the shortcut is triggered have been heavily restricted, but there may still be times this extension is unexpectedly overriding <code>Enter</code> behavior.</li>
</ul>
<p>If you experience any problems, please submit an <a href="https://github.com/kbrose/vsc-python-indent/issues">issue</a>, or better yet a <a href="https://github.com/kbrose/vsc-python-indent/pulls">pull request</a>.</p>
<h2 id="release-notes">Release Notes</h2>
<p>See <a href="https://github.com/kbrose/vsc-python-indent/blob/master/CHANGELOG.md">the change log</a>.</p>
<h2 id="developing">Developing</h2>
<p>See <a href="https://github.com/kbrose/vsc-python-indent/blob/master/DEVELOP.md">the developer docs</a> for pointers on how to develop this extension.</p>
